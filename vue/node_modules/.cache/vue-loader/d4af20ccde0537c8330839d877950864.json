{"remainingRequest":"D:\\code\\study\\vue\\vue-test\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\study\\vue\\vue-test\\vue\\src\\components\\login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\study\\vue\\vue-test\\vue\\src\\components\\login\\index.vue","mtime":1550215136549},{"path":"D:\\code\\study\\vue\\vue-test\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\study\\vue\\vue-test\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code\\study\\vue\\vue-test\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\study\\vue\\vue-test\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from 'vue'\nimport popbox from '../../assets/script/popup.js';\nimport {Popup} from 'mint-ui';\n\nVue.component(Popup.name, Popup);\nlet totleTime = 60;\n\nlet timeFlag = true;\nexport default{\n    name:'loginbox',\n    data:()=>{\n        return{\n            message: '',\n            codemassage:'',\n            img_code:'',\n            code_tips:'获取验证码',\n            popupVisible1: false,\n            modelsss:false,\n            getCodeFlag:false,\n            code_img:''\n        }\n    },\n    methods: {\n        getcode:function(){\n            if(timeFlag){\n                timeFlag = false;\n                const loginTime = localStorage.getItem('loginTime');\n                if(this.message == ''){\n                    this.$commonjs.toast('手机号不能为空');\n                    timeFlag = true;\n                }else{\n                    if(this.$commonjs.checkMobile(this.message)){\n                        if(loginTime >= 5){\n                            timeFlag = true;\n                            this.popupVisible1 = true;\n                            const img=document.getElementById(\"verifyCode\");  \n                            img.src = this.$commonjs.urlPath()+'/login/create?w=120&h=60';\n                        }else{\n                            this.getSimCode();\n                        }\n                    }else{\n                        timeFlag = true;\n                        this.$commonjs.toast('手机号错误');\n                    }\n                }\n            }else{\n                this.$commonjs.toast('稍后再试');\n            }\n        },\n        getSimCode(){\n            this.getCodeFlag=true;//设置已经获取到验证的标记\n            const loginTime = localStorage.getItem('loginTime');\n            console.log(loginTime);\n            const url = this.$commonjs.urlPath()+'/login/sendverifycode';\n            //你要传给后台的参数值 key/value\n            const params = new URLSearchParams();\n            params.append('mobile', this.message);\n            params.append('flag', 'atlg');\n            this.$axios({method: 'post',url:url,data:params}).then((res)=>{\n                timeFlag = true;\n                if(res.data.flag == 'Y'){\n                    if(loginTime != undefined && loginTime != null && loginTime != ''){\n                        localStorage.setItem('loginTime', localStorage.getItem('loginTime')*1+1);\n                    }else{\n                        localStorage.setItem('loginTime',1);\n                    }\n                    timeFlag = false;\n                    this.timeCount();\n                }else{\n                    this.$commonjs.toast(res.data['flag']);\n                }\n            }).catch(function (err) {\n                console.log(err);\n            })\n        },\n        addEventCodeInput(){\n            //设置光标位置\n            for(let k=0;k<4;k++){\n                if(k==this.img_code.length){\n                    document.getElementsByClassName('btm_line')[k].classList.add('linebg');\n                }else{\n                    document.getElementsByClassName('btm_line')[k].classList.remove('linebg');\n                }\n            }\n            \n            if(this.img_code.length > 4){\n                this.img_code = this.img_code.slice(0,4);\n            }else if(this.img_code.length == 0){\n                document.getElementsByClassName('btm_line')[0].innerHTML='';\n            }else{\n                for(let y in this.img_code){\n                    document.getElementsByClassName('btm_line')[y].innerHTML=this.img_code[y];\n                    const coes_leng = 4-this.img_code.length;\n                    for(let s=0;s<coes_leng;s++){\n                        document.getElementsByClassName('btm_line')[3-s].innerHTML='';\n                    }\n                }\n                \n            }\n            \n            if(this.img_code.length == 4){\n                const url = this.$commonjs.urlPath()+'/login/verify';\n                //你要传给后台的参数值 key/value\n                const params = new URLSearchParams();\n                params.append('code', this.img_code);\n                params.append('flag', 'ATMLG');\n                this.$axios({method: 'post',url:url,data:params}).then((res)=>{\n                    console.log(res);\n                    if(res.data.flag == 'Y'){\n                        this.getSimCode();\n                        this.popupVisible1=false;\n                    }else{\n                        this.$commonjs.toast(res.data['flag']);\n                    }\n                }).catch(function (err) {\n                    console.log(err);\n                })\n            }\n            \n        },\n        checkSimCode(){\n            if(this.message){\n                if(this.$commonjs.checkMobile(this.message)){\n                    if(this.getCodeFlag){\n                        if(this.codemassage.length == 6){\n                            const url = this.$commonjs.urlPath()+'/login/userlogin';\n                            //你要传给后台的参数值 key/value\n                            const params = new URLSearchParams();\n                            params.append('mobile', this.message);\n                            params.append('smsCode', this.codemassage);\n                            this.$axios({method: 'post',url:url,data:params}).then((res)=>{\n                                if(res.data.flag == 'Y'){\n                                    console.log('登录成功');\n                                }else{\n                                    this.$commonjs.toast(res.data['flag']);\n                                }\n                            }).catch(function (err) {\n                                console.log(err);\n                            })\n                        }\n                    }else{\n                        this.message = '';\n                        document.getElementById('semcode').value='';\n                        this.$commonjs.toast('要先获取验证码哦');\n                    }\n                }else{\n                    this.$commonjs.toast('填写正确的手机号');\n                }\n            }else{\n                this.message = '';\n                document.getElementById('semcode').value='';\n                this.$commonjs.toast('手机号不能为空');\n            }\n        },\n        errPopTips(val){\n            popbox.$emit(\"popFun\",val);   //$emit这个方法会触发一个事件\n        },\n        timeCount(){\n            if(totleTime <= 0){\n                totleTime = 60;\n                this.code_tips = '重新获取';\n                timeFlag = true;//回复标记\n                this.getCodeFlag=false;\n            }else{\n                --totleTime;\n                this.code_tips = totleTime+'s';\n                setTimeout(()=>{\n                    this.timeCount();\n                },1000);\n            }\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src\\components\\login","sourcesContent":["<template>\r\n    <div class=\"loginbox\">\r\n        <div class=\"tel_box clearfix\">\r\n            <div class=\"phone left\">+86</div>\r\n            <div class=\"left input_phone\"><input type=\"number\" name=\"contactway\" id=\"contactway\" v-model=\"message\" placeholder=\"请输入手机号码\" value=\"\" /></div>\r\n        </div>\n        <div class=\"code_box clearfix\">\r\n            <div class=\"code_input left\"><input type=\"number\" name=\"semcode\" id=\"semcode\" v-model=\"codemassage\" v-on:input=\"checkSimCode\"  placeholder=\"短信验证码\" value=\"\" /></div>\r\n            <div class=\"right\" @click=\"getcode\">{{code_tips}}</div>\r\n        </div>\r\n        \r\n        <!--二维码弹窗页面-->\r\n        <mt-popup v-model=\"popupVisible1\" popup-transition=\"popup-fade\" position=\"right\" class=\"mint-popup-1 mint-popup-right\" closeOnClickModal=\"modelsss\">\r\n            <div class=\"code_conta\">\r\n                <div class=\"code_tips\">输入下方数字</div>\r\n                <div class=\"codse_img_box\">\r\n                    <img id=\"verifyCode\" :src=\"code_img\"/>\r\n                </div>\r\n                <div class=\"code_input_box\">\r\n                    <input type=\"number\" name=\"imgcode\" id=\"imgcode\" value=\"\" v-model=\"img_code\" v-on:input=\"addEventCodeInput\" autofocus=\"autofocus\" />\r\n                    <div class=\"btm_line line1 linebg\"></div>\n                    <div class=\"btm_line line2\"></div>\n                    <div class=\"btm_line line3\"></div>\n                    <div class=\"btm_line line4\"></div>\r\n                </div>\r\n            </div>\r\n        </mt-popup>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Vue from 'vue'\r\n    import popbox from '../../assets/script/popup.js';\r\n    import {Popup} from 'mint-ui';\r\n\r\n    Vue.component(Popup.name, Popup);\r\n    let totleTime = 60;\r\n    \r\n    let timeFlag = true;\r\n    export default{\r\n        name:'loginbox',\r\n        data:()=>{\r\n            return{\r\n                message: '',\r\n                codemassage:'',\r\n                img_code:'',\r\n                code_tips:'获取验证码',\r\n                popupVisible1: false,\r\n                modelsss:false,\r\n                getCodeFlag:false,\r\n                code_img:''\r\n            }\r\n        },\r\n        methods: {\r\n            getcode:function(){\r\n                if(timeFlag){\r\n                    timeFlag = false;\r\n                    const loginTime = localStorage.getItem('loginTime');\r\n                    if(this.message == ''){\r\n                        this.$commonjs.toast('手机号不能为空');\r\n                        timeFlag = true;\r\n                    }else{\r\n                        if(this.$commonjs.checkMobile(this.message)){\r\n                            if(loginTime >= 5){\r\n                                timeFlag = true;\r\n                                this.popupVisible1 = true;\r\n                                const img=document.getElementById(\"verifyCode\");  \r\n                                img.src = this.$commonjs.urlPath()+'/login/create?w=120&h=60';\r\n                            }else{\r\n                                this.getSimCode();\r\n                            }\r\n                        }else{\r\n                            timeFlag = true;\r\n                            this.$commonjs.toast('手机号错误');\r\n                        }\r\n                    }\r\n                }else{\r\n                    this.$commonjs.toast('稍后再试');\r\n                }\r\n            },\r\n            getSimCode(){\r\n                this.getCodeFlag=true;//设置已经获取到验证的标记\r\n                const loginTime = localStorage.getItem('loginTime');\r\n                console.log(loginTime);\r\n                const url = this.$commonjs.urlPath()+'/login/sendverifycode';\r\n                //你要传给后台的参数值 key/value\r\n                const params = new URLSearchParams();\r\n                params.append('mobile', this.message);\r\n                params.append('flag', 'atlg');\r\n                this.$axios({method: 'post',url:url,data:params}).then((res)=>{\r\n                    timeFlag = true;\r\n                    if(res.data.flag == 'Y'){\r\n                        if(loginTime != undefined && loginTime != null && loginTime != ''){\r\n                            localStorage.setItem('loginTime', localStorage.getItem('loginTime')*1+1);\r\n                        }else{\r\n                            localStorage.setItem('loginTime',1);\r\n                        }\r\n                        timeFlag = false;\r\n                        this.timeCount();\r\n                    }else{\r\n                        this.$commonjs.toast(res.data['flag']);\r\n                    }\r\n                }).catch(function (err) {\r\n                    console.log(err);\r\n                })\r\n            },\r\n            addEventCodeInput(){\r\n                //设置光标位置\r\n                for(let k=0;k<4;k++){\r\n                    if(k==this.img_code.length){\r\n                        document.getElementsByClassName('btm_line')[k].classList.add('linebg');\r\n                    }else{\r\n                        document.getElementsByClassName('btm_line')[k].classList.remove('linebg');\r\n                    }\r\n                }\r\n                \r\n                if(this.img_code.length > 4){\r\n                    this.img_code = this.img_code.slice(0,4);\r\n                }else if(this.img_code.length == 0){\r\n                    document.getElementsByClassName('btm_line')[0].innerHTML='';\r\n                }else{\r\n                    for(let y in this.img_code){\r\n                        document.getElementsByClassName('btm_line')[y].innerHTML=this.img_code[y];\r\n                        const coes_leng = 4-this.img_code.length;\r\n                        for(let s=0;s<coes_leng;s++){\n                            document.getElementsByClassName('btm_line')[3-s].innerHTML='';\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                \r\n                if(this.img_code.length == 4){\r\n                    const url = this.$commonjs.urlPath()+'/login/verify';\r\n                    //你要传给后台的参数值 key/value\r\n                    const params = new URLSearchParams();\r\n                    params.append('code', this.img_code);\r\n                    params.append('flag', 'ATMLG');\r\n                    this.$axios({method: 'post',url:url,data:params}).then((res)=>{\r\n                        console.log(res);\r\n                        if(res.data.flag == 'Y'){\r\n                            this.getSimCode();\r\n                            this.popupVisible1=false;\r\n                        }else{\r\n                            this.$commonjs.toast(res.data['flag']);\r\n                        }\r\n                    }).catch(function (err) {\r\n                        console.log(err);\r\n                    })\r\n                }\r\n                \r\n            },\r\n            checkSimCode(){\r\n                if(this.message){\r\n                    if(this.$commonjs.checkMobile(this.message)){\r\n                        if(this.getCodeFlag){\r\n                            if(this.codemassage.length == 6){\r\n                                const url = this.$commonjs.urlPath()+'/login/userlogin';\r\n                                //你要传给后台的参数值 key/value\r\n                                const params = new URLSearchParams();\r\n                                params.append('mobile', this.message);\n                                params.append('smsCode', this.codemassage);\r\n                                this.$axios({method: 'post',url:url,data:params}).then((res)=>{\r\n                                    if(res.data.flag == 'Y'){\r\n                                        console.log('登录成功');\r\n                                    }else{\r\n                                        this.$commonjs.toast(res.data['flag']);\r\n                                    }\r\n                                }).catch(function (err) {\r\n                                    console.log(err);\r\n                                })\r\n                            }\r\n                        }else{\r\n                            this.message = '';\r\n                            document.getElementById('semcode').value='';\r\n                            this.$commonjs.toast('要先获取验证码哦');\r\n                        }\r\n                    }else{\r\n                        this.$commonjs.toast('填写正确的手机号');\r\n                    }\r\n                }else{\r\n                    this.message = '';\r\n                    document.getElementById('semcode').value='';\r\n                    this.$commonjs.toast('手机号不能为空');\r\n                }\r\n            },\r\n            errPopTips(val){\r\n                popbox.$emit(\"popFun\",val);   //$emit这个方法会触发一个事件\r\n            },\r\n            timeCount(){\r\n                if(totleTime <= 0){\r\n                    totleTime = 60;\r\n                    this.code_tips = '重新获取';\r\n                    timeFlag = true;//回复标记\r\n                    this.getCodeFlag=false;\r\n                }else{\r\n                    --totleTime;\r\n                    this.code_tips = totleTime+'s';\r\n                    setTimeout(()=>{\r\n                        this.timeCount();\r\n                    },1000);\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .loginbox{width: 90%;margin: 0 auto;}\r\n    .loginbox .tel_box{border-bottom: 1px solid #F5F5F5;padding: 0.1rem 0.2rem;}\r\n    .loginbox .tel_box .phone{width: 13%;line-height: 40px;font-size: 0.15rem;opacity: 0.8;background: url(https://img01.youdemai.com/images/ydmapp/common/icon/icon_right.png)no-repeat right center;background-size: 0.07rem;}\n    .loginbox .tel_box .input_phone{width: 80%;}\r\n    .loginbox .code_box{border-bottom: 1px solid #F5F5F5;padding: 0.1rem 0.2rem;}\r\n    .loginbox .code_box .right{line-height: 0.4rem;font-size: 0.14rem;}\r\n    .loginbox .code_box  .code_input{width: 60%;}\r\n    \r\n    .code_conta{width: 80%;margin: 1.0rem auto 0;text-align: center;}\r\n    .code_conta .code_tips{font-size: 0.3rem;}\r\n    .code_conta .code_input_box{position: relative;}\r\n    .code_conta .code_input_box .btm_line{position: absolute;top: 0;border: 0;width: 19%;height: 40px;line-height: 40px;border-bottom: 1px solid #F5F5F5;}\n    .code_conta .code_input_box .btm_line.linebg{background: url(https://t.alipayobjects.com/images/rmsweb/T1nYJhXalXXXXXXXXX.gif)no-repeat 70% 0.1rem;background-size: 0.025rem;}\r\n    .code_conta .code_input_box .btm_line.line1{left: 0;}\n    .code_conta .code_input_box .btm_line.line2{left: 27%;}\n    .code_conta .code_input_box .btm_line.line3{left: 54%;}\n    .code_conta .code_input_box .btm_line.line4{left: 81%;}\r\n    .code_conta .code_input_box input{opacity: 0;}\r\n    \r\n    .mint-popup-1{width: 100%;left: 0%;top: 0%;height: 100%;-webkit-transform: translate3d(0, 0, 0);transform: translate3d(0, 0, 0);}\r\n</style>"]}]}